---
// Static index page with client-side language detection
const base = (import.meta.env.BASE_URL || '/').endsWith('/')
  ? import.meta.env.BASE_URL
  : import.meta.env.BASE_URL + '/';
---

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bioinformatics Student Council - LMU & TUM</title>
  <meta name="description" content="Information portal for Bioinformatics students at LMU and TUM Munich">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <base href={base}>
  
  <!-- Canonical URL -->
  <link rel="canonical" href={base + 'en/'} id="canonical">
  
  <!-- Language alternatives with hreflang tags -->
  <link rel="alternate" href={base + 'en/'} hreflang="en" />
  <link rel="alternate" href={base + 'de/'} hreflang="de" />
  <link rel="alternate" href={base + 'en/'} hreflang="x-default" />
  
  <script is:inline>
    // Get browser language
    // Resolve base URL from the <base> element so it always matches Astro's base
    const base = (document.baseURI.endsWith('/') ? document.baseURI : document.baseURI + '/');
    const userLang = navigator.language || navigator.userLanguage;
    
    // Check if language starts with 'de'
    if (userLang.toLowerCase().startsWith("de")) {
      // Update canonical for German users
      document.getElementById('canonical').href = base + 'de/';
      // Redirect to German version
      window.location.replace(base + 'de/');
    } else {
      // Redirect to English version by default
      window.location.replace(base + 'en/');
    }
  </script>
  
  <!-- Fallback meta refresh (for browsers with JS disabled) -->
  <meta http-equiv="refresh" content={`0; url=${base}en/`}>
  
  <!-- Structured data for search engines -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Website",
      "name": "Bioinformatics Student Council - LMU & TUM",
      "url": "/",
      "potentialAction": {
        "@type": "ViewAction",
        "target": [
          {"@type": "EntryPoint", "urlTemplate": "/en/", "inLanguage": "en"},
          {"@type": "EntryPoint", "urlTemplate": "/de/", "inLanguage": "de"}
        ]
      }
    }
  </script>
</head>
<body>
  <div style="font-family: system-ui, sans-serif; max-width: 600px; margin: 2rem auto; padding: 1rem;">
    <h1>Bioinformatics Student Council</h1>
    <p>Redirecting to the appropriate language version...</p>
    <p>If you are not redirected automatically, please select your language:</p>
    <ul>
      <li><a href="en/">English</a></li>
      <li><a href="de/">Deutsch</a></li>
    </ul>
  </div>
</body>
</html>
--- 